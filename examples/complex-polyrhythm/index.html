<!DOCTYPE html>
<html>
<head>
  <title></title>
</head>
<body>

</body>
<script type="text/javascript" src="../../build/beet.js"></script>
<script type="text/javascript">
  var context = new AudioContext();
  var beet = new Beet({
    context: context,
    tempo: 30
  });
  var fours = beet.pattern(2);
  var threes = beet.pattern(3);
  var layer = beet.layer(fours, callback1);
  // var layer2 = beet.layer(threes, callback2);

  function callback1 (time, step) {
    var osc = context.createOscillator();
    var gain = context.createGain();
    osc.connect(gain);
    gain.connect(context.destination);
    
    beet.utils.envelope(gain.gain, time, {
      start: 0,
      attack: 0.001,
      sustain: 1,
      release: 1.5
    });

    beet.utils.envelope(osc.frequency, time, {
      start: 880,
      attack: 0.1,
      sustain: 300,
      release: 1.5
    });
    osc.start(time);
    osc.stop(time + 3);
  }

  // function callback2 (time, step) {
  //   var osc = context.createOscillator();
  //   osc.connect(context.destination);
  //   osc.frequency.value = 220;
  //   osc.start(time);
  //   osc.stop(time + 0.2);
  // }

  beet.add(layer);
  // beet.add(layer2);
  
  beet.start();
</script>
</html>